<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Movie</title>
    <style>
        .Aloha {
            width: 100%;
            height: 500px;
            border: none;
        }
    </style>
</head>
<body>

<h1 id="title">Loading title...</h1>
<h2 id="orig_title">Loading original title...</h2>
<div id="player"></div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const kp_id = urlParams.get('kp_id');
    const imdb_id = urlParams.get('imdb_id');
    const tmdb_id = urlParams.get('tmdb_id');

    let queryParam;
    if (kp_id) {
        queryParam = `kp=${kp_id}`;
    } else if (imdb_id) {
        queryParam = `imdb=${imdb_id}`;
    } else if (tmdb_id) {
        queryParam = `tmdb=${tmdb_id}`;
    } else {
        document.getElementById('title').textContent = 'Error: No valid parameters provided.';
        document.getElementById('orig_title').textContent = '';
        return;
    }

    const token = 'd317441359e505c343c2063edc97e7';
    const apiUrl = `https://api.alloha.tv/?token=${token}&${queryParam}`;

    fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
            document.getElementById('title').textContent = data.title || 'Title not available';
            document.getElementById('orig_title').textContent = data.orig_title || 'Original title not available';

            const iframe = document.createElement('iframe');
            iframe.className = 'Aloha';
            iframe.src = data.iframe;
            document.getElementById('player').appendChild(iframe);
        })
        .catch(error => {
            console.error('Error fetching movie data:', error);
            document.getElementById('title').textContent = 'Error loading movie data.';
            document.getElementById('orig_title').textContent = '';
        });
</script>

</body>
</html>
